# 역할 및 동작 방식 설명

## 📞 현재 구현 방식

### 기본 구조

**현재는 AI가 항상 피싱 피해자 역할을 합니다.**

```
[사용자 마이크 입력] 
    ↓
[STT: 음성 → 텍스트]
    ↓
[백엔드로 전송]
    ↓
[AI 분석 및 응답 생성]
    ↓
[AI = 피싱 피해자 역할로 응답]
    ↓
[TTS: 텍스트 → 음성]
    ↓
[스피커로 재생]
```

### 예시 시나리오

**시나리오 1: 사용자가 피싱범처럼 말하는 경우**
- 사용자: "안녕하세요, 금융감독원입니다. 계좌번호를 알려주세요."
- AI (피해자 역할): "어... 금융감독원이요? 제가 확인해보고 다시 연락드리겠습니다."
- 스캠 점수: 증가 (피싱 패턴 감지)

**시나리오 2: 사용자가 정상적으로 말하는 경우**
- 사용자: "안녕하세요, 배달 서비스입니다. 주문하신 음식이 도착했습니다."
- AI (피해자 역할): "네, 알겠습니다. 지금 내려가겠습니다."
- 스캠 점수: 낮음 (정상 통화)

## 🎭 역할 선택 기능 (개선 필요)

현재는 AI가 항상 피해자 역할만 합니다. 사용자가 역할을 선택할 수 있도록 개선할 수 있습니다:

### 옵션 1: 사용자가 피해자 역할 (현재 방식)
- 사용자: 피싱범처럼 말함
- AI: 피해자 역할로 응답
- 목적: 피싱 패턴 분석 및 점수 계산

### 옵션 2: 사용자가 피해자 역할
- 사용자: 피해자처럼 말함 (당황, 헷갈림)
- AI: 피싱범 역할로 응답 (피싱 시도)
- 목적: 피싱 대응 훈련

### 옵션 3: 양방향 역할 전환
- 통화 중 역할 전환 가능
- 더 복잡한 시나리오 테스트

## 💡 현재 동작 방식 요약

**질문: 사용자가 말하면 AI가 대답해주는가?**
- ✅ 네, 맞습니다. 사용자가 마이크로 말하면 AI가 피해자 역할로 응답합니다.

**질문: 사용자가 피싱 피해자 역할이면 AI가 피싱범 역할을 하는가?**
- ❌ 아니요, 현재는 AI가 항상 피해자 역할입니다.
- 개선 필요: 역할 선택 기능 추가

**질문: 사용자가 피싱범 역할이면 AI가 피싱 피해자 역할을 하는가?**
- ✅ 네, 맞습니다. 사용자가 피싱범처럼 말하면 AI가 피해자 역할로 응답합니다.

## 🔧 개선 방안

역할 선택 기능을 추가하려면:

1. **프론트엔드에 역할 선택 UI 추가**
   - "피싱범 역할" / "피해자 역할" 선택

2. **백엔드 AI 서비스 수정**
   - 역할에 따라 다른 시스템 프롬프트 사용
   - 피싱범 역할: 피싱 시도하는 프롬프트
   - 피해자 역할: 피해자처럼 응답하는 프롬프트

3. **스캠 점수 계산 로직 조정**
   - 역할에 따라 점수 계산 방식 변경

