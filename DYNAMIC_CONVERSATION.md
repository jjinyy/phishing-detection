# 유동적 대화 vs 정해진 시나리오

## 📋 현재 구현 상태

### ✅ 유동적 대화 (음성 모드)

**음성 모드를 사용하면 AI가 유동적으로 대화합니다:**

1. **사용자의 실제 음성 입력** → STT → 텍스트 변환
2. **대화 히스토리 포함** → 백엔드로 전송
3. **AI가 이전 대화를 기억** → 맥락에 맞는 응답 생성
4. **매번 다른 응답** → 자연스러운 대화 흐름

**예시:**
```
사용자: "안녕하세요, 금융감독원입니다."
AI: "아... 네? 금융감독원이요?"

사용자: "네, 계좌 안전조치가 필요합니다."
AI: "어... 계좌요? 제가 뭘 잘못한 건가요?"

사용자: "지금 당장 계좌번호를 알려주세요."
AI: "음... 그런데 금융감독원에서 직접 계좌번호를 물어보시는 게 맞나요?"
```

→ **매번 다른 응답, 이전 대화 내용을 기억**

### ❌ 정해진 시나리오 (시뮬레이션 모드)

**시뮬레이션 모드는 정해진 대화를 순차적으로 재생합니다:**

1. **미리 작성된 대화 시나리오** → 순차적으로 재생
2. **고정된 응답** → 항상 같은 대화
3. **사용자 입력 무시** → 시나리오대로 진행

**예시:**
```
1턴: "안녕하세요, 금융감독원입니다."
2턴: "아... 네? 금융감독원이요?"
3턴: "계좌 안전조치가 필요합니다."
...
```

→ **항상 같은 순서, 같은 내용**

## 🔧 개선 사항

### 대화 히스토리 전달 추가

**이전:**
- 각 메시지마다 독립적으로 응답 생성
- 이전 대화 내용을 기억하지 못함
- 맥락 없는 응답

**현재:**
- 최근 10개 대화 히스토리 전달
- AI가 이전 대화를 기억
- 맥락에 맞는 자연스러운 응답

### Temperature 증가

**이전:** `temperature=0.7`
**현재:** `temperature=0.8`

→ 더 다양하고 자연스러운 응답 생성

### Max Tokens 증가

**이전:** `max_tokens=150`
**현재:** `max_tokens=200`

→ 더 긴 응답 가능

## 💡 사용 방법

### 유동적 대화를 원하면:

1. **음성 모드 사용** ✅
   - "🎤 음성 모드 사용" 체크박스 선택
   - 실제 마이크로 말하기
   - AI가 유동적으로 응답

2. **역할 선택**
   - 피싱범 역할: 피싱 패턴 분석
   - 피해자 역할: 피싱 대응 훈련

### 정해진 시나리오를 원하면:

1. **시뮬레이션 모드 사용**
   - 음성 모드 체크박스 해제
   - 정해진 대화 시나리오 재생

## 🎯 차이점 요약

| 항목 | 시뮬레이션 모드 | 음성 모드 |
|------|---------------|----------|
| **대화 방식** | 정해진 시나리오 | 유동적 대화 |
| **사용자 입력** | 무시됨 | 반영됨 |
| **AI 응답** | 항상 동일 | 매번 다름 |
| **대화 히스토리** | 사용 안 함 | 사용함 |
| **맥락 인식** | 없음 | 있음 |
| **자연스러움** | 낮음 | 높음 |

## 📝 결론

**질문: 딱딱 정해진 시나리오대로 움직이는가?**

- **시뮬레이션 모드**: ✅ 네, 정해진 시나리오대로 진행됩니다.
- **음성 모드**: ❌ 아니요, 사용자의 말에 따라 유동적으로 응답합니다.

**음성 모드를 사용하면 AI가 사용자의 말에 따라 자연스럽게 대화합니다!**

